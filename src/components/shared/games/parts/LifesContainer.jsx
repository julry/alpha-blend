import { AnimatePresence, motion } from "framer-motion";
import styled from "styled-components";

const Wrapper = styled.div`
    display: flex;
    justify-content: center;
    align-items: center;
    gap: calc(var(--spacing_x4) - 2px);
`;

const Heart = styled.svg`
    position: relative;
    z-index: ${({$z}) => $z};
    width: var(--spacing_x6);
    height: var(--spacing_x6);
    flex-shrink: 0;

    & svg {
        position: absolute;
        inset: 0;
    }
`;

const MAX_LIVES = 3;

export const LifeContainer = ({ className, lives, maxLives = MAX_LIVES}) => (
    <Wrapper className={className}>
        {Array.from({length: maxLives}).map((_,index) => (
            <AnimatePresence key={`live_${index}`}>
                { index > (lives - 1) ? (
                    <Heart viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.9998 5.15259L13.6554 3.77072C10.4998 0.526966 4.71355 1.64634 2.6248 5.72447C1.64418 7.64259 1.42293 10.412 3.21355 13.9463C4.93855 17.3495 8.5273 21.4257 14.9998 25.8657C21.4723 21.4257 25.0592 17.3495 26.7861 13.9463C28.5767 10.4101 28.3573 7.64259 27.3748 5.72447C25.2861 1.64634 19.4998 0.525091 16.3442 3.76884L14.9998 5.15259ZM14.9998 28.1251C-13.7496 9.12759 6.14793 -5.69991 14.6698 2.14322C14.7823 2.24697 14.8923 2.35384 14.9998 2.46384C15.1054 2.35315 15.2155 2.24681 15.3298 2.14509C23.8498 -5.70366 43.7492 9.12572 14.9998 28.1251Z" fill="#EF3124"/>
                    </Heart>
                ) : (
                    <Heart  viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"                    >
                        <path d="M14.9998 5.15259L13.6554 3.77072C10.4998 0.526966 4.71355 1.64634 2.6248 5.72447C1.64418 7.64259 1.42293 10.412 3.21355 13.9463C4.93855 17.3495 8.5273 21.4257 14.9998 25.8657C21.4723 21.4257 25.0592 17.3495 26.7861 13.9463C28.5767 10.4101 28.3573 7.64259 27.3748 5.72447C25.2861 1.64634 19.4998 0.525091 16.3442 3.76884L14.9998 5.15259ZM14.9998 28.1251C-13.7496 9.12759 6.14793 -5.69991 14.6698 2.14322C14.7823 2.24697 14.8923 2.35384 14.9998 2.46384C15.1054 2.35315 15.2155 2.24681 15.3298 2.14509C23.8498 -5.70366 43.7492 9.12572 14.9998 28.1251Z" fill="white"/>
                        <path d="M14.9998 5.15259L13.6554 3.77072C10.4998 0.526966 4.71355 1.64634 2.6248 5.72447C1.64418 7.64259 1.42293 10.412 3.21355 13.9463C4.93855 17.3495 8.5273 21.4257 14.9998 25.8657C21.4723 21.4257 25.0592 17.3495 26.7861 13.9463C28.5767 10.4101 28.3573 7.64259 27.3748 5.72447C25.2861 1.64634 19.4998 0.525091 16.3442 3.76884L14.9998 5.15259Z" fill="#EF3124"/>
                    </Heart>
                )}
            </AnimatePresence>
        ))}
    </Wrapper>
)